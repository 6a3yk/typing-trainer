<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8" />
  <title>Тренажер печати по Python</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- Кнопка открытия бокового меню -->
  <button class="side-menu-btn" id="openMenuBtn" title="Выбрать задание"
    aria-label="Открыть меню заданий">&#x25B6;</button>
  <!-- Боковое меню выбора задания -->
  <nav class="side-menu" id="sideMenu" aria-label="Меню выбора задания">
    <div class="side-menu-title">Выберите задание</div>
    <ul class="side-menu-list" id="sideMenuList"></ul>
  </nav>
  <div class="wrap">
    <h1>Тренажер печати по Python</h1>
    <div class="layout">
      <div class="layout-main">
        <div class="panel">
          <div class="row row-col row-minh-260">
            <div class="code-area" id="codeArea" aria-label="Текст к набору">
              <!-- код будет вставлен программно -->
            </div>
            <div class="metrics-panel" id="metricsPanel">
              <button class="metrics-toggle-btn" id="metricsToggleBtn" title="Свернуть/развернуть метрики"
                aria-label="Свернуть/развернуть метрики">▲
              </button>

              <div class="metric-block">
                <div class="metric-label">Время</div>
                <div class="metric-value" id="timer">00:00</div>
              </div>
              <div class="metric-block">
                <div class="metric-label">Прогресс</div>
                <div class="metric-value" id="progress">0 / 0</div>
              </div>
              <div class="metric-block">
                <div class="metric-label">Символов в минуту</div>
                <div class="metric-value" id="cpm">0</div>
              </div>
              <div class="metric-block">
                <div class="metric-label">Точность</div>
                <div class="metric-value" id="accuracy">0%</div>
              </div>
              <div class="metric-block">
                <div class="metric-label">Ошибки</div>
                <div class="metric-value" id="errors">0</div>
              </div>
            </div>
          </div>
          <div class="hint" id="hint">Подсказка: начните печатать. Используйте пробел, Tab(4 пробела) и Enter как в
            коде.</div>
          <div class="controls" role="group" aria-label="Управление">
            <button id="startBtn" class="primary">Начать заново</button>
            <button id="resetBtn" class="secondary" title="Сбросить прогресс, но сохранить фрагмент кода">Сбросить
              прогресс</button>
            <div class="mobile-keys" id="mobileKeys" aria-label="Кнопки для мобильного ввода">
              <button class="mk" id="mkTab" type="button">Tab</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Скрытый input для надёжного приёма ввода (поддержка IME, мобильных клавиатур) -->
  <textarea id="hiddenInput" class="hidden-input" aria-label="Скрытый ввод" autocomplete="off" autocorrect="off"
    autocapitalize="off" spellcheck="false"></textarea>
  <input id="hiddenInputPwd" class="hidden-input" type="password" inputmode="text" autocomplete="new-password"
    autocorrect="off" autocapitalize="off" spellcheck="false" aria-label="Скрытый ввод (мобильный)" />
  <!-- <script type="module">
  window.CODE_TO_TYPE = `print("Hello, world!")\nif 5>2:\n\ta=5-2`;
</script> -->
  <script type="module" src="./app.js"></script>


  <!-- Панель результатов -->
  <div id="resultsPanel" class="results-panel">
    <h3 class="results-title">Результат</h3>
    <div>Время: <strong id="resTime">00:00</strong></div>
    <div>Символов в минуту: <strong id="resCpm">0</strong></div>
    <div>Точность (с первого раза): <strong id="resAcc">0%</strong></div>
    <div>Текущие ошибки: <strong id="resErrors">0</strong></div>
    <div class="results-actions">
      <button id="retryBtn" class="primary">Повторить</button>
      <button id="exportBtn" class="secondary" style="display:none">Экспорт</button>
      <button id="closeResBtn">Закрыть</button>
    </div>
  </div>
</body>

</html>